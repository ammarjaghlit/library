{
	"info": {
		"_postman_id": "faaebc3b-6e7c-45bb-a3e2-c0c2d72b4599",
		"name": "Identity Aware Proxy Labs",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Agility 2020",
			"item": [
				{
					"name": "lab Setup",
					"item": [
						{
							"name": "bigip1-Create-Test AS3 is running",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "0f744343-77b8-4988-81fb-9f21956821a0",
										"exec": [
											"if (responseCode.code === 200) {",
											"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
											"",
											"}",
											"",
											"",
											"pm.test(\"AS3 is Running\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "aa46a078-9746-4f28-bf7e-6ced8b12d8fa",
										"exec": [
											"var STAGE = pm.environment.get(\"stage\");",
											"",
											"if (STAGE === \"setup\") {",
											"pm.collectionVariables.set(\"APM_AAA_AD_NAME\", \"ad-servers\");",
											"pm.collectionVariables.set(\"APM_AAA_OCSP_NAME\", \"ocsp-servers\");",
											"} else if(STAGE === 'delete') {",
											"postman.setNextRequest(\"bigip5-Delete-Test AS3 is running\");",
											"} else",
											"postman.setNextRequest(null);"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "basic",
									"basic": [
										{
											"key": "password",
											"value": "admin",
											"type": "string"
										},
										{
											"key": "username",
											"value": "admin",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "https://10.1.1.4/mgmt/shared/appsvcs/info",
									"protocol": "https",
									"host": [
										"10",
										"1",
										"1",
										"4"
									],
									"path": [
										"mgmt",
										"shared",
										"appsvcs",
										"info"
									]
								}
							},
							"response": []
						},
						{
							"name": "bigip1-create-AD Server Pool",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "4d5b3355-ba52-4707-bc76-62ccde7f1090",
										"exec": [
											"if (responseCode.code === 200) {",
											"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
											"pm.test(\"Pool Created\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"} else ",
											"pm.test(\"Pool Exists\", function () {",
											"    pm.response.to.have.status(409);",
											"});",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "basic",
									"basic": [
										{
											"key": "password",
											"value": "admin",
											"type": "string"
										},
										{
											"key": "username",
											"value": "admin",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"type": "text",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "\n{\n\t\"name\":\"ad-pool\",\n\t\"members\":[\n\t\t{\n\t\t\"name\":\"10.1.20.7:0\",\n\t\t\"address\":\"10.1.20.7\",\n\t\t\"monitor\": \"/Common/gateway_icmp\"\n\t\t\t\n\t\t}\n\t\t]\n}"
								},
								"url": {
									"raw": "https://10.1.1.4/mgmt/tm/ltm/pool/",
									"protocol": "https",
									"host": [
										"10",
										"1",
										"1",
										"4"
									],
									"path": [
										"mgmt",
										"tm",
										"ltm",
										"pool",
										""
									]
								}
							},
							"response": []
						},
						{
							"name": "bigip1-Create-APM AAA Active Directory",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "9c5d9d73-0a81-4ce1-8cb6-7f16a1f13db6",
										"exec": [
											"if (responseCode.code === 200) {",
											"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
											"pm.test(\"APM AAA AD Object Created\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"} else ",
											"pm.test(\"APM AAA AD Object Exists\", function () {",
											"    pm.response.to.have.status(409);",
											"});",
											"",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "11833355-78cd-4452-9c74-ab50af37b2f5",
										"exec": [
											"",
											"var PRIOR_RESPONSE = pm.collectionVariables.get(\"PRIOR_RESPONSE\");",
											"",
											"if (PRIOR_RESPONSE === 'OK') {",
											"",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "basic",
									"basic": [
										{
											"key": "password",
											"value": "admin",
											"type": "string"
										},
										{
											"key": "username",
											"value": "admin",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"{{APM_AAA_AD_NAME}}\",\r\n    \"adminEncryptedPassword\": \"admin\",\r\n    \"adminName\": \"admin\",\r\n    \"cleanupCache\": \"none\",\r\n    \"domain\": \"f5lab.local\",\r\n    \"groupCacheTtl\": 30,\r\n    \"kdcLockoutDuration\": 0,\r\n    \"locationSpecific\": \"true\",\r\n    \"padata\": \"none\",\r\n    \"pool\": \"/Common/ad-pool\",  \r\n    \"psoCacheTtl\": 30,\r\n    \"timeout\": 15,\r\n    \"usePool\": \"enabled\",\r\n    \"domainControllers\": [\r\n        {\r\n            \"name\": \"dc1.f5lab.local\",\r\n            \"ip\": \"10.1.20.7\"\r\n        }\r\n    ]\r\n}"
								},
								"url": {
									"raw": "https://10.1.1.4/mgmt/tm/apm/aaa/active-directory",
									"protocol": "https",
									"host": [
										"10",
										"1",
										"1",
										"4"
									],
									"path": [
										"mgmt",
										"tm",
										"apm",
										"aaa",
										"active-directory"
									]
								}
							},
							"response": []
						},
						{
							"name": "bigip1-Create-APM AAA OCSP Responder",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "1af57299-f27d-4ca6-a81d-c3506bc757ce",
										"exec": [
											"var PRIOR_RESPONSE = pm.collectionVariables.get(\"PRIOR_RESPONSE\");",
											"",
											"if (PRIOR_RESPONSE === 'OK') {",
											"",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "313b5482-4fea-4e26-8699-2d2f67e8b091",
										"exec": [
											"if (responseCode.code === 200) {",
											"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
											"pm.test(\"APM AAA OCSP Responder Created\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"} else ",
											"pm.test(\"APM AAA OCSP Responder Exists\", function () {",
											"    pm.response.to.have.status(409);",
											"});",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "basic",
									"basic": [
										{
											"key": "password",
											"value": "admin",
											"type": "string"
										},
										{
											"key": "username",
											"value": "admin",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"type": "text",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"name\": \"{{APM_AAA_OCSP_NAME}}\",\r\n    \"allowCerts\": \"true\",\r\n    \"caFile\": \"/Common/ca.f5lab.local.crt\",\r\n    \"caPath\": \"/ocsp\",\r\n    \"certIdDigest\": \"sha1\",\r\n    \"chain\": \"true\",\r\n    \"checkCerts\": \"true\",\r\n    \"explicitOcsp\": \"true\",\r\n    \"ignoreAia\": \"false\",\r\n    \"intern\": \"true\",\r\n    \"locationSpecific\": \"true\",\r\n    \"nonce\": \"false\",\r\n    \"signDigest\": \"sha1\",\r\n    \"statusAge\": 0,\r\n    \"trustOther\": \"false\",\r\n    \"url\": \"http://dc1.f5lab.local\",\r\n    \"validityPeriod\": 300,\r\n    \"verify\": \"true\",\r\n    \"verifyCert\": \"true\",\r\n    \"verifySig\": \"true\"\r\n}"
								},
								"url": {
									"raw": "https://10.1.1.4/mgmt/tm/apm/aaa/ocsp/",
									"protocol": "https",
									"host": [
										"10",
										"1",
										"1",
										"4"
									],
									"path": [
										"mgmt",
										"tm",
										"apm",
										"aaa",
										"ocsp",
										""
									]
								}
							},
							"response": []
						},
						{
							"name": "bigip5-Create-Test AS3 is running",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "0f744343-77b8-4988-81fb-9f21956821a0",
										"exec": [
											"if (responseCode.code === 200) {",
											"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
											"",
											"}",
											"",
											"",
											"pm.test(\"AS3 is Running\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "aa46a078-9746-4f28-bf7e-6ced8b12d8fa",
										"exec": [
											"var PRIOR_RESPONSE = pm.collectionVariables.get(\"PRIOR_RESPONSE\");",
											"",
											"if (PRIOR_RESPONSE === 'OK') {",
											"",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "basic",
									"basic": [
										{
											"key": "password",
											"value": "admin",
											"type": "string"
										},
										{
											"key": "username",
											"value": "admin",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "https://10.1.1.11/mgmt/shared/appsvcs/info",
									"protocol": "https",
									"host": [
										"10",
										"1",
										"1",
										"11"
									],
									"path": [
										"mgmt",
										"shared",
										"appsvcs",
										"info"
									]
								}
							},
							"response": []
						},
						{
							"name": "bigip5-Create-Add bigip1 iap1.acme.com VS to Server",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "c11a1b39-8b32-47e6-9c97-b9821f8a0f1c",
										"exec": [
											"if (responseCode.code === 200) {",
											"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
											"pm.test(\"Virtual Server added to Server\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"} else ",
											"pm.test(\"Virtual Server Exists\", function () {",
											"    pm.response.to.have.status(409);",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "229d4c4d-b8e4-45e4-afc6-2965fd348d09",
										"exec": [
											"pm.collectionVariables.set(\"APP_NAME\", \"iap1.acme.com\");",
											"pm.collectionVariables.set(\"PATH_NAME\", \"Application\");",
											"pm.collectionVariables.set(\"PARTITION_NAME\", \"Common\");",
											"pm.collectionVariables.set(\"VS_NAME\", \"iap1.acme.com\");",
											"",
											"",
											"var PRIOR_RESPONSE = pm.collectionVariables.get(\"PRIOR_RESPONSE\");",
											"",
											"if (PRIOR_RESPONSE === 'OK') {",
											"",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "basic",
									"basic": [
										{
											"key": "password",
											"value": "admin",
											"type": "string"
										},
										{
											"key": "username",
											"value": "admin",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"type": "text",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n\"name\": \"/{{PARTITION_NAME}}/{{PATH_NAME}}/{{APP_NAME}}\",\r\n\"destination\": \"10.1.10.100:443\"\r\n}"
								},
								"url": {
									"raw": "https://10.1.1.11/mgmt/tm/gtm/server/~Common~bigip1.f5lab.local/virtual-servers/",
									"protocol": "https",
									"host": [
										"10",
										"1",
										"1",
										"11"
									],
									"path": [
										"mgmt",
										"tm",
										"gtm",
										"server",
										"~Common~bigip1.f5lab.local",
										"virtual-servers",
										""
									]
								}
							},
							"response": []
						},
						{
							"name": "bigip5-Create-WideIP iap1.acme.com using AS3",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "9c5d9d73-0a81-4ce1-8cb6-7f16a1f13db6",
										"exec": [
											"if (responseCode.code === 200) {",
											"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
											"}",
											"",
											"pm.test(\"Wide IP Created\", function () {",
											"    pm.response.to.have.status(200);",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "11833355-78cd-4452-9c74-ab50af37b2f5",
										"exec": [
											"",
											"",
											"var PRIOR_RESPONSE = pm.collectionVariables.get(\"PRIOR_RESPONSE\");",
											"",
											"if (PRIOR_RESPONSE === 'OK') {",
											"",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "basic",
									"basic": [
										{
											"key": "password",
											"value": "admin",
											"type": "string"
										},
										{
											"key": "username",
											"value": "admin",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n \"class\": \"ADC\",\r\n    \"schemaVersion\": \"3.6.0\",\r\n    \"id\": \"GSLB_Sample\",\r\n    \"{{APP_NAME}}\": {\r\n        \"class\": \"Tenant\",\r\n        \"Application\": {\r\n            \"class\": \"Application\",\r\n            \"template\": \"generic\",\r\n            \"testDomain\": {\r\n                \"class\": \"GSLB_Domain\",\r\n                \"domainName\": \"{{APP_NAME}}\",\r\n                \"resourceRecordType\": \"A\",\r\n                \"poolLbMode\": \"ratio\",\r\n                \"pools\": [\r\n                              { \"use\": \"{{APP_NAME}}-pool\" }\r\n                ]\r\n            },\r\n            \"{{APP_NAME}}-pool\": {\r\n               \"class\": \"GSLB_Pool\",\r\n                \"enabled\": true,\r\n                \"lbModeAlternate\": \"ratio\",\r\n                \"lbModeFallback\": \"ratio\",\r\n                \"manualResumeEnabled\": false,\r\n                \"verifyMemberEnabled\": true,\r\n                \"members\": [\r\n                \t{\r\n                \t\"ratio\":10,\r\n                \t\"server\": {\r\n                \t\t\"bigip\": \"/Common/bigip1.f5lab.local\"\r\n                \t\t},\r\n                \t\t\"virtualServer\":\"/{{PARTITION_NAME}}/{{PATH_NAME}}/{{VS_NAME}}\"\r\n                \t}\r\n                ],\r\n                \"resourceRecordType\": \"A\"\r\n            }\r\n        }\r\n    }\r\n \r\n}"
								},
								"url": {
									"raw": "https://10.1.1.11/mgmt/shared/appsvcs/declare",
									"protocol": "https",
									"host": [
										"10",
										"1",
										"1",
										"11"
									],
									"path": [
										"mgmt",
										"shared",
										"appsvcs",
										"declare"
									]
								}
							},
							"response": []
						},
						{
							"name": "bigip5-Create-WideIP basic.acme.com using AS3",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "9c5d9d73-0a81-4ce1-8cb6-7f16a1f13db6",
										"exec": [
											"if (responseCode.code === 200) {",
											"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
											"}",
											"",
											"pm.test(\"Wide IP Created\", function () {",
											"    pm.response.to.have.status(200);",
											"});"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "11833355-78cd-4452-9c74-ab50af37b2f5",
										"exec": [
											"",
											"pm.collectionVariables.set(\"APP_NAME\", \"basic.acme.com\");",
											"pm.collectionVariables.set(\"PATH_NAME\", \"Application\");",
											"pm.collectionVariables.set(\"PARTITION_NAME\", \"Common\");",
											"",
											"var PRIOR_RESPONSE = pm.collectionVariables.get(\"PRIOR_RESPONSE\");",
											"",
											"if (PRIOR_RESPONSE === 'OK') {",
											"",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "basic",
									"basic": [
										{
											"key": "password",
											"value": "admin",
											"type": "string"
										},
										{
											"key": "username",
											"value": "admin",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n \"class\": \"ADC\",\r\n    \"schemaVersion\": \"3.6.0\",\r\n    \"id\": \"GSLB_Sample\",\r\n    \"{{APP_NAME}}\": {\r\n        \"class\": \"Tenant\",\r\n        \"Application\": {\r\n            \"class\": \"Application\",\r\n            \"template\": \"generic\",\r\n            \"testDomain\": {\r\n                \"class\": \"GSLB_Domain\",\r\n                \"domainName\": \"{{APP_NAME}}\",\r\n                \"resourceRecordType\": \"A\",\r\n                \"poolLbMode\": \"ratio\",\r\n                \"pools\": [\r\n                              { \"use\": \"{{APP_NAME}}-pool\" }\r\n                ]\r\n            },\r\n            \"{{APP_NAME}}-pool\": {\r\n               \"class\": \"GSLB_Pool\",\r\n                \"enabled\": true,\r\n                \"lbModeAlternate\": \"ratio\",\r\n                \"lbModeFallback\": \"ratio\",\r\n                \"manualResumeEnabled\": false,\r\n                \"verifyMemberEnabled\": true,\r\n                \"members\": [\r\n                \t{\r\n                \t\"ratio\":10,\r\n                \t\"server\": {\r\n                \t\t\"bigip\": \"/Common/bigip1.f5lab.local\"\r\n                \t\t},\r\n                \t\t\"virtualServer\":\"/{{PARTITION_NAME}}/{{PATH_NAME}}/{{VS_NAME}}\"\r\n                \t}\r\n                ],\r\n                \"resourceRecordType\": \"A\"\r\n            }\r\n        }\r\n    }\r\n \r\n}"
								},
								"url": {
									"raw": "https://10.1.1.11/mgmt/shared/appsvcs/declare",
									"protocol": "https",
									"host": [
										"10",
										"1",
										"1",
										"11"
									],
									"path": [
										"mgmt",
										"shared",
										"appsvcs",
										"declare"
									]
								}
							},
							"response": []
						},
						{
							"name": "bigip5-Create-WideIP header.acme.com using AS3",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "9c5d9d73-0a81-4ce1-8cb6-7f16a1f13db6",
										"exec": [
											"if (responseCode.code === 200) {",
											"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
											"}",
											"",
											"pm.test(\"Wide IP Created\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"postman.setNextRequest(null);"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "11833355-78cd-4452-9c74-ab50af37b2f5",
										"exec": [
											"pm.collectionVariables.set(\"APP_NAME\", \"header.acme.com\");",
											"pm.collectionVariables.set(\"PATH_NAME\", \"Application\");",
											"pm.collectionVariables.set(\"PARTITION_NAME\", \"Common\");",
											"",
											"var PRIOR_RESPONSE = pm.collectionVariables.get(\"PRIOR_RESPONSE\");",
											"",
											"if (PRIOR_RESPONSE === 'OK') {",
											"",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "basic",
									"basic": [
										{
											"key": "password",
											"value": "admin",
											"type": "string"
										},
										{
											"key": "username",
											"value": "admin",
											"type": "string"
										}
									]
								},
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n \"class\": \"ADC\",\r\n    \"schemaVersion\": \"3.6.0\",\r\n    \"id\": \"GSLB_Sample\",\r\n    \"{{APP_NAME}}\": {\r\n        \"class\": \"Tenant\",\r\n        \"Application\": {\r\n            \"class\": \"Application\",\r\n            \"template\": \"generic\",\r\n            \"testDomain\": {\r\n                \"class\": \"GSLB_Domain\",\r\n                \"domainName\": \"{{APP_NAME}}\",\r\n                \"resourceRecordType\": \"A\",\r\n                \"poolLbMode\": \"ratio\",\r\n                \"pools\": [\r\n                              { \"use\": \"{{APP_NAME}}-pool\" }\r\n                ]\r\n            },\r\n            \"{{APP_NAME}}-pool\": {\r\n               \"class\": \"GSLB_Pool\",\r\n                \"enabled\": true,\r\n                \"lbModeAlternate\": \"ratio\",\r\n                \"lbModeFallback\": \"ratio\",\r\n                \"manualResumeEnabled\": false,\r\n                \"verifyMemberEnabled\": true,\r\n                \"members\": [\r\n                \t{\r\n                \t\"ratio\":10,\r\n                \t\"server\": {\r\n                \t\t\"bigip\": \"/Common/bigip1.f5lab.local\"\r\n                \t\t},\r\n                \t\t\"virtualServer\":\"/{{PARTITION_NAME}}/{{PATH_NAME}}/{{VS_NAME}}\"\r\n                \t}\r\n                ],\r\n                \"resourceRecordType\": \"A\"\r\n            }\r\n        }\r\n    }\r\n \r\n}"
								},
								"url": {
									"raw": "https://10.1.1.11/mgmt/shared/appsvcs/declare",
									"protocol": "https",
									"host": [
										"10",
										"1",
										"1",
										"11"
									],
									"path": [
										"mgmt",
										"shared",
										"appsvcs",
										"declare"
									]
								}
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				},
				{
					"name": "Delete Lab Components",
					"item": [
						{
							"name": "bigip5-Delete-Test AS3 is running",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "0f744343-77b8-4988-81fb-9f21956821a0",
										"exec": [
											"if (responseCode.code === 200) {",
											"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
											"",
											"}",
											"",
											"",
											"pm.test(\"AS3 is Running\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "aa46a078-9746-4f28-bf7e-6ced8b12d8fa",
										"exec": [
											"var STAGE = pm.environment.get(\"stage\");",
											"",
											"if (STAGE === \"delete\") {",
											"",
											"pm.collectionVariables.set(\"APM_AAA_AD_NAME\", \"ad-servers\");",
											"pm.collectionVariables.set(\"APM_AAA_OCSP_NAME\", \"ocsp-servers\");",
											"} else",
											"postman.setNextRequest(null);",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "basic",
									"basic": [
										{
											"key": "password",
											"value": "admin",
											"type": "string"
										},
										{
											"key": "username",
											"value": "admin",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "https://10.1.1.11/mgmt/shared/appsvcs/info",
									"protocol": "https",
									"host": [
										"10",
										"1",
										"1",
										"11"
									],
									"path": [
										"mgmt",
										"shared",
										"appsvcs",
										"info"
									]
								}
							},
							"response": []
						},
						{
							"name": "bigip5-Delete-WideIP header.acme.com",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "120309ff-8564-4a60-b105-904b6b20069c",
										"exec": [
											"pm.collectionVariables.set(\"APP_NAME\", \"header.acme.com\");",
											"pm.collectionVariables.set(\"PATH_NAME\", \"Application\");",
											"pm.collectionVariables.set(\"PARTITION_NAME\", \"Common\");",
											"pm.collectionVariables.set(\"VS_NAME\", \"iap1.acme.com\");",
											"",
											"var PRIOR_RESPONSE = pm.collectionVariables.get(\"PRIOR_RESPONSE\");",
											"",
											"if (PRIOR_RESPONSE === 'OK') {",
											"",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "aad66151-1747-4334-be7e-deb188c86172",
										"exec": [
											"",
											"if (responseCode.code === 200) {",
											"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
											"pm.test(\"Wide IP deleted\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"} else if (responseCode.code === 422) {",
											"pm.test(\"WideIP does not exist\", function () {",
											"    pm.expect(pm.response.text()).to.include(\"path does not exist\");",
											"});",
											"",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "basic",
									"basic": [
										{
											"key": "password",
											"value": "admin",
											"type": "string"
										},
										{
											"key": "username",
											"value": "admin",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "[\n{\n\t\"op\":\"remove\",\n\t\"path\":\"{{APP_NAME}}/Application\"\n \n}\n]"
								},
								"url": {
									"raw": "https://10.1.1.11/mgmt/shared/appsvcs/declare",
									"protocol": "https",
									"host": [
										"10",
										"1",
										"1",
										"11"
									],
									"path": [
										"mgmt",
										"shared",
										"appsvcs",
										"declare"
									]
								}
							},
							"response": []
						},
						{
							"name": "bigip5-Delete-WideIP basic.acme.com",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "120309ff-8564-4a60-b105-904b6b20069c",
										"exec": [
											"pm.collectionVariables.set(\"APP_NAME\", \"basic.acme.com\");",
											"pm.collectionVariables.set(\"PATH_NAME\", \"Application\");",
											"pm.collectionVariables.set(\"PARTITION_NAME\", \"Common\");",
											"pm.collectionVariables.set(\"VS_NAME\", \"iap1.acme.com\");",
											"",
											"var PRIOR_RESPONSE = pm.collectionVariables.get(\"PRIOR_RESPONSE\");",
											"",
											"if (PRIOR_RESPONSE === 'OK') {",
											"",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "aad66151-1747-4334-be7e-deb188c86172",
										"exec": [
											"",
											"if (responseCode.code === 200) {",
											"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
											"pm.test(\"Wide IP deleted\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"} else if (responseCode.code === 422) {",
											"pm.test(\"WideIP does not exist\", function () {",
											"    pm.expect(pm.response.text()).to.include(\"path does not exist\");",
											"});",
											"",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "basic",
									"basic": [
										{
											"key": "password",
											"value": "admin",
											"type": "string"
										},
										{
											"key": "username",
											"value": "admin",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "[\n{\n\t\"op\":\"remove\",\n\t\"path\":\"{{APP_NAME}}/Application\"\n \n}\n]"
								},
								"url": {
									"raw": "https://10.1.1.11/mgmt/shared/appsvcs/declare",
									"protocol": "https",
									"host": [
										"10",
										"1",
										"1",
										"11"
									],
									"path": [
										"mgmt",
										"shared",
										"appsvcs",
										"declare"
									]
								}
							},
							"response": []
						},
						{
							"name": "bigip5-Delete-WideIP iap1.acme.com",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "120309ff-8564-4a60-b105-904b6b20069c",
										"exec": [
											"pm.collectionVariables.set(\"APP_NAME\", \"iap1.acme.com\");",
											"pm.collectionVariables.set(\"PATH_NAME\", \"Application\");",
											"pm.collectionVariables.set(\"PARTITION_NAME\", \"Common\");",
											"pm.collectionVariables.set(\"VS_NAME\", \"iap1.acme.com\");",
											"",
											"var PRIOR_RESPONSE = pm.collectionVariables.get(\"PRIOR_RESPONSE\");",
											"",
											"if (PRIOR_RESPONSE === 'OK') {",
											"",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "aad66151-1747-4334-be7e-deb188c86172",
										"exec": [
											"",
											"if (responseCode.code === 200) {",
											"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
											"pm.test(\"Wide IP deleted\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"} else if (responseCode.code === 422) {",
											"pm.test(\"WideIP does not exist\", function () {",
											"    pm.expect(pm.response.text()).to.include(\"path does not exist\");",
											"});",
											"",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "basic",
									"basic": [
										{
											"key": "password",
											"value": "admin",
											"type": "string"
										},
										{
											"key": "username",
											"value": "admin",
											"type": "string"
										}
									]
								},
								"method": "PATCH",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "[\n{\n\t\"op\":\"remove\",\n\t\"path\":\"{{APP_NAME}}/Application\"\n \n}\n]"
								},
								"url": {
									"raw": "https://10.1.1.11/mgmt/shared/appsvcs/declare",
									"protocol": "https",
									"host": [
										"10",
										"1",
										"1",
										"11"
									],
									"path": [
										"mgmt",
										"shared",
										"appsvcs",
										"declare"
									]
								}
							},
							"response": []
						},
						{
							"name": "bigip5-Delete-bigip1 Server VS iap1.acme.com",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "fc205d64-4a5d-4973-90bd-2e14f4e8aadc",
										"exec": [
											"setTimeout(function(){}, 2000);",
											"",
											"var PRIOR_RESPONSE = pm.collectionVariables.get(\"PRIOR_RESPONSE\");",
											"",
											"if (PRIOR_RESPONSE === 'OK') {",
											"",
											"}"
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "1b0faa46-c82e-47e7-baa7-ff87fff35def",
										"exec": [
											"if (responseCode.code === 200) {",
											"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
											"pm.test(\"VS deleted from server\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"} else ",
											"pm.test(\"VS does not exist\", function () {",
											"    pm.response.to.have.status(404);",
											"});",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "basic",
									"basic": [
										{
											"key": "password",
											"value": "admin",
											"type": "string"
										},
										{
											"key": "username",
											"value": "admin",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"type": "text",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "https://10.1.1.11/mgmt/tm/gtm/server/~Common~bigip1.f5lab.local/virtual-servers/~{{PARTITION_NAME}}~{{PATH_NAME}}~{{APP_NAME}}",
									"protocol": "https",
									"host": [
										"10",
										"1",
										"1",
										"11"
									],
									"path": [
										"mgmt",
										"tm",
										"gtm",
										"server",
										"~Common~bigip1.f5lab.local",
										"virtual-servers",
										"~{{PARTITION_NAME}}~{{PATH_NAME}}~{{APP_NAME}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "bigip1-Test AS3 is running",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "0f744343-77b8-4988-81fb-9f21956821a0",
										"exec": [
											"if (responseCode.code === 200) {",
											"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
											"}",
											"",
											"",
											"pm.test(\"AS3 is Running\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "basic",
									"basic": [
										{
											"key": "password",
											"value": "admin",
											"type": "string"
										},
										{
											"key": "username",
											"value": "admin",
											"type": "string"
										}
									]
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "https://10.1.1.4/mgmt/shared/appsvcs/info",
									"protocol": "https",
									"host": [
										"10",
										"1",
										"1",
										"4"
									],
									"path": [
										"mgmt",
										"shared",
										"appsvcs",
										"info"
									]
								}
							},
							"response": []
						},
						{
							"name": "bigip1-Delete-APM AAA OCSP Responder",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "1af57299-f27d-4ca6-a81d-c3506bc757ce",
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "8cbda568-0fc9-4341-8aec-17582bd43c04",
										"exec": [
											"if (responseCode.code === 200) {",
											"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
											"pm.test(\"APM AAA OCSP Responder deleted\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"} else if (responseCode.code === 404) { ",
											"pm.test(\"APM AAA OCSP Responder does not exist\", function () {",
											"    pm.response.to.have.status(404);",
											"});",
											"} else {",
											"pm.test(\"APM AAA OCSP RESPONDER MUST BE DELETED MANUALLY\", function () {",
											"    pm.response.to.have.status(501);",
											"});    ",
											"}",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "basic",
									"basic": [
										{
											"key": "password",
											"value": "admin",
											"type": "string"
										},
										{
											"key": "username",
											"value": "admin",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"type": "text",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "https://10.1.1.4/https://10.1.1.4/mgmt/tm/apm/aaa/ocsp/{{APM_AAA_OCSP_NAME}}",
									"protocol": "https",
									"host": [
										"10",
										"1",
										"1",
										"4"
									],
									"path": [
										"https:",
										"",
										"10.1.1.4",
										"mgmt",
										"tm",
										"apm",
										"aaa",
										"ocsp",
										"{{APM_AAA_OCSP_NAME}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "bigip1-Delete-APM AAA Active Directory",
							"event": [
								{
									"listen": "prerequest",
									"script": {
										"id": "1af57299-f27d-4ca6-a81d-c3506bc757ce",
										"exec": [
											"",
											""
										],
										"type": "text/javascript"
									}
								},
								{
									"listen": "test",
									"script": {
										"id": "44624488-d457-4975-9516-0fa5d9adc46d",
										"exec": [
											"if (responseCode.code === 200) {",
											"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
											"pm.test(\"APM AAA AD object deleted\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"} else ",
											"pm.test(\"APM AAA ad object does not exist\", function () {",
											"    pm.response.to.have.status(404);",
											"});",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "basic",
									"basic": [
										{
											"key": "password",
											"value": "admin",
											"type": "string"
										},
										{
											"key": "username",
											"value": "admin",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"type": "text",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\r\n\"name\":\"internal-dns-resolver\", \r\n \"forwardZones\": [\r\n                {\r\n                    \"name\": \".\",\r\n                    \"nameservers\": [\r\n                        {\r\n                            \"name\": \"10.1.20.7:53\"\r\n                        }\r\n                    ]\r\n                }\r\n            ]\r\n}"
								},
								"url": {
									"raw": "https://10.1.1.4/mgmt/tm/apm/aaa/active-directory/{{APM_AAA_AD_NAME}}",
									"protocol": "https",
									"host": [
										"10",
										"1",
										"1",
										"4"
									],
									"path": [
										"mgmt",
										"tm",
										"apm",
										"aaa",
										"active-directory",
										"{{APM_AAA_AD_NAME}}"
									]
								}
							},
							"response": []
						},
						{
							"name": "bigip1-delete-AD Server Pool",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "4d5b3355-ba52-4707-bc76-62ccde7f1090",
										"exec": [
											"if (responseCode.code === 200) {",
											"pm.collectionVariables.set('PRIOR_RESPONSE', 'OK' );",
											"pm.test(\"Pool Deleted\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"} else ",
											"pm.test(\"Pool Does not Exist\", function () {",
											"    pm.response.to.have.status(409);",
											"});",
											"",
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "basic",
									"basic": [
										{
											"key": "password",
											"value": "admin",
											"type": "string"
										},
										{
											"key": "username",
											"value": "admin",
											"type": "string"
										}
									]
								},
								"method": "DELETE",
								"header": [
									{
										"key": "Content-Type",
										"type": "text",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": ""
								},
								"url": {
									"raw": "https://10.1.1.4/mgmt/tm/ltm/pool/~Common~ad-pool",
									"protocol": "https",
									"host": [
										"10",
										"1",
										"1",
										"4"
									],
									"path": [
										"mgmt",
										"tm",
										"ltm",
										"pool",
										"~Common~ad-pool"
									]
								}
							},
							"response": []
						}
					],
					"protocolProfileBehavior": {},
					"_postman_isSubFolder": true
				}
			],
			"protocolProfileBehavior": {}
		}
	],
	"variable": [
		{
			"id": "1c7a1dd4-9e74-4c46-a483-5023bbd47543",
			"key": "PRIOR_RESPONSE",
			"value": "",
			"type": "string"
		},
		{
			"id": "05268e72-8e02-4e09-9cf1-a606c0bdb6fe",
			"key": "APM_AAA_AD_NAME",
			"value": "",
			"type": "string"
		},
		{
			"id": "3c5cc52a-24f0-4cfc-93f3-b3826da2337f",
			"key": "APM_AAA_OCSP_NAME",
			"value": "",
			"type": "string"
		},
		{
			"id": "b9e7d21a-ac14-4433-9086-2c7023ee3620",
			"key": "APP_NAME",
			"value": "",
			"type": "string"
		},
		{
			"id": "55835295-2919-4779-a54e-48878cbf03e2",
			"key": "PARTITION_NAME",
			"value": "",
			"type": "string"
		},
		{
			"id": "caac100c-c4f8-4394-9eac-1ad82c283dac",
			"key": "PATH_NAME",
			"value": "",
			"type": "string"
		},
		{
			"id": "d302bb1e-0fa6-4e52-a78b-8af7a25ce142",
			"key": "VS_NAME",
			"value": "",
			"type": "string"
		}
	],
	"protocolProfileBehavior": {}
}